env:
  global:
    - CC_TEST_REPORTER_ID=travis

language: php
     
php:
  - 7.1

install:
  - sudo apt-get -qq update

before_script:
  - composer install --prefer-source
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build

script:
  - phpunit -c phpunit.xml --coverage-clover build/logs/clover.xml

after_script:
  - ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT

addons:
  code_climate:
    repo_token:
      secure: "RN9jb90SAfbj4xh5EWKaQl8H5osbSIK0MW4iGMiDGi+k3Wk/EQMAMhK3rNFC4HD9tz9fwv12N4L7JQWl+MXR+Cn/RpIskhSFo9ishWatRpjlipzRQYZarcKwP78RWeApewPIsqm74gGJi1cv3kSdh2BFjLo7jVZYOa5V9M1/bmBgVDxI/ujzTLSacdWAWXMCgAWXE6CV/WNiWFYsB1N0IKywth4VZaFxNjvsuK+B2ZJLTjgB4aLZ0WKNykArDPxW66idJgKIs4sEjkcpLWCs6xkIg11LA1HzV9xuZ8tMO8m6hqgrpFiK/iz7oh2Qju5rv0OsHaS+0EvJax+h+Yl+GyF4aTvAmuo4anYmwFSBTMLOq2SDvIAjYc2uRN39y04e/AAmPQnA7TVAVr/BcOTxX4GJ75janaPHBJ5GW2U3qrbijT4X9XMVXzu+5MgjFtWVAo87uPod/knmEvvVVXF8iHKh+zNlEJQyE5VBT5iyWEM8BCpb6ebSw7nYNLESRoukYvyTeMxsSqTo5IBIaw4bPiBOKB63umzFKS+izbUHOA2Y3JzQSdTlyo7MiRLX5NWsnjn3us8G6tXgA9vsdL0MsGSH5/+CKCdQodqiXU4oy+wVakxa6mS80dCJZZQMMyEf2azChidFTuCV+rFq1zFig1d+37VL3ds6wjRTPteaoac="
